{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Gwen/Documents/GitHub/Ejednevnik/diary/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Gwen/Documents/GitHub/Ejednevnik/diary/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createAsyncThunk}from'@reduxjs/toolkit';import authApi from'../../share/auth';export var signup=createAsyncThunk(\"auth/signup\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data,_ref){var rejectWithValue,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:rejectWithValue=_ref.rejectWithValue;_context.prev=1;_context.next=4;return authApi.signup(data);case 4:result=_context.sent;return _context.abrupt(\"return\",result);case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);return _context.abrupt(\"return\",rejectWithValue(_context.t0));case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}());export var login=createAsyncThunk(\"auth/login\",/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data,_ref3){var rejectWithValue,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:rejectWithValue=_ref3.rejectWithValue;_context2.prev=1;_context2.next=4;return authApi.login(data);case 4:result=_context2.sent;return _context2.abrupt(\"return\",result);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);return _context2.abrupt(\"return\",rejectWithValue(_context2.t0));case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function(_x3,_x4){return _ref4.apply(this,arguments);};}());export var logout=createAsyncThunk(\"auth/logout\",/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(_,_ref5){var rejectWithValue,result;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:rejectWithValue=_ref5.rejectWithValue;_context3.prev=1;_context3.next=4;return authApi.logout();case 4:result=_context3.sent;return _context3.abrupt(\"return\",result);case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);return _context3.abrupt(\"return\",rejectWithValue(_context3.t0));case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[1,8]]);}));return function(_x5,_x6){return _ref6.apply(this,arguments);};}());export var current=createAsyncThunk(\"auth/current\",/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(_,_ref7){var getState,rejectWithValue,_getState,auth,result;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:getState=_ref7.getState,rejectWithValue=_ref7.rejectWithValue;_context4.prev=1;_getState=getState(),auth=_getState.auth;_context4.next=5;return authApi.getCurrent(auth.token);case 5:result=_context4.sent;return _context4.abrupt(\"return\",result);case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](1);return _context4.abrupt(\"return\",rejectWithValue(_context4.t0));case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[1,9]]);}));return function(_x7,_x8){return _ref8.apply(this,arguments);};}(),{condition:function condition(_,_ref9){var getState=_ref9.getState;var _getState2=getState(),auth=_getState2.auth;if(!auth.token){return false;}}});","map":{"version":3,"names":["createAsyncThunk","authApi","signup","data","rejectWithValue","result","login","logout","_","current","getState","auth","getCurrent","token","condition"],"sources":["C:/Users/Gwen/Documents/GitHub/Ejednevnik/diary/src/redux/auth/auth-operation.js"],"sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport authApi from '../../share/auth';\r\n\r\n\r\nexport const signup=createAsyncThunk(\r\n    \"auth/signup\",\r\n    async(data,{rejectWithValue})=>{\r\n        try {\r\n            const result=await authApi.signup(data)\r\n            return result\r\n        } catch (error) {\r\n\r\n          return  rejectWithValue(error)\r\n        }\r\n    }\r\n)\r\n\r\n\r\nexport const login=createAsyncThunk(\r\n    \"auth/login\",\r\n    async(data,{rejectWithValue})=>{\r\n        try {\r\n            const result=await authApi.login(data)\r\n            return result\r\n        } catch (error) {\r\n\r\n          return  rejectWithValue(error)\r\n        }\r\n    }\r\n)\r\nexport const logout=createAsyncThunk(\r\n    \"auth/logout\",\r\n    async(_,{rejectWithValue})=>{\r\n        try {\r\n            const result=await authApi.logout()\r\n            return result\r\n        } catch (error) {\r\n            // console.log(error);\r\n          return  rejectWithValue(error)\r\n        }\r\n    }\r\n)\r\n\r\n\r\nexport const current = createAsyncThunk(\r\n    \"auth/current\",\r\n    async (_, {getState, rejectWithValue}) => {\r\n        try {\r\n            const {auth} = getState();\r\n            const result = await authApi.getCurrent(auth.token);\r\n            return result;\r\n        } catch (error) {\r\n            return rejectWithValue(error);\r\n        }\r\n    },\r\n    {\r\n        condition: (_, {getState}) => {\r\n            const {auth} = getState();\r\n            if(!auth.token) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n)"],"mappings":"0RAAA,OAASA,gBAAT,KAAiC,kBAAjC,CACA,MAAOC,QAAP,KAAoB,kBAApB,CAGA,MAAO,IAAMC,OAAM,CAACF,gBAAgB,CAChC,aADgC,6FAEhC,iBAAMG,IAAN,oJAAYC,eAAZ,MAAYA,eAAZ,uCAE2BH,QAAO,CAACC,MAAR,CAAeC,IAAf,CAF3B,QAEcE,MAFd,+CAGeA,MAHf,0FAMcD,eAAe,aAN7B,sEAFgC,oEAA7B,CAcP,MAAO,IAAME,MAAK,CAACN,gBAAgB,CAC/B,YAD+B,6FAE/B,kBAAMG,IAAN,yJAAYC,eAAZ,OAAYA,eAAZ,yCAE2BH,QAAO,CAACK,KAAR,CAAcH,IAAd,CAF3B,QAEcE,MAFd,iDAGeA,MAHf,8FAMcD,eAAe,cAN7B,wEAF+B,qEAA5B,CAYP,MAAO,IAAMG,OAAM,CAACP,gBAAgB,CAChC,aADgC,6FAEhC,kBAAMQ,CAAN,yJAASJ,eAAT,OAASA,eAAT,yCAE2BH,QAAO,CAACM,MAAR,EAF3B,QAEcF,MAFd,iDAGeA,MAHf,8FAMcD,eAAe,cAN7B,wEAFgC,qEAA7B,CAcP,MAAO,IAAMK,QAAO,CAAGT,gBAAgB,CACnC,cADmC,6FAEnC,kBAAOQ,CAAP,iLAAWE,QAAX,OAAWA,QAAX,CAAqBN,eAArB,OAAqBA,eAArB,4BAEuBM,QAAQ,EAF/B,CAEeC,IAFf,WAEeA,IAFf,wBAG6BV,QAAO,CAACW,UAAR,CAAmBD,IAAI,CAACE,KAAxB,CAH7B,QAGcR,MAHd,iDAIeA,MAJf,8FAMeD,eAAe,cAN9B,wEAFmC,qEAWnC,CACIU,SAAS,CAAE,mBAACN,CAAD,OAAmB,IAAdE,SAAc,OAAdA,QAAc,CAC1B,eAAeA,QAAQ,EAAvB,CAAOC,IAAP,YAAOA,IAAP,CACA,GAAG,CAACA,IAAI,CAACE,KAAT,CAAgB,CACZ,MAAO,MAAP,CACH,CACJ,CANL,CAXmC,CAAhC"},"metadata":{},"sourceType":"module"}