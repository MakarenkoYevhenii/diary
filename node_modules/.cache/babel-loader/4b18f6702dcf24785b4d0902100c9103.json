{"ast":null,"code":"import axios from \"axios\";\n\nconst addToken = token => {\n  axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n};\n\nconst auth = axios.create({\n  baseURL: \"http://localhost:4500/api/user/\"\n});\nexport const login = async userData => {\n  try {\n    const data = auth.post(`/login`, {\n      email: userData.login,\n      password: userData.password\n    });\n    const token = (await data).data.token;\n    addToken(token);\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const getCurrent = async token => {\n  addToken(token);\n  const {\n    data: result\n  } = await auth.get(\"/current\");\n  return result;\n};\n\nconst signup = async data => {\n  const {\n    data: result\n  } = await axios.post(\"https://connections-api.herokuapp.com/users/signup/\", data);\n  addToken(result.token);\n  return result;\n};\n\nconst logout = async () => {\n  const {\n    data: result\n  } = await axios.post(\"https://connections-api.herokuapp.com/users/logout/\");\n  return result;\n};\n\nconst authApi = {\n  signup,\n  login,\n  logout,\n  getCurrent\n};\nexport default authApi;","map":{"version":3,"names":["axios","addToken","token","defaults","headers","common","Authorization","auth","create","baseURL","login","userData","data","post","email","password","error","console","log","getCurrent","result","get","signup","logout","authApi"],"sources":["C:/Users/Gwen/Documents/GitHub/Ejednevnik/diary/src/share/auth.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\n\r\n const addToken = token => {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n}\r\nconst auth=axios.create({\r\n    baseURL:\"http://localhost:4500/api/user/\"\r\n  })\r\n  \r\nexport const login = async (userData) => {\r\n    try {\r\n      const data = auth.post(`/login`,{email:userData.login,password:userData.password});\r\n      const token= (await data).data.token\r\n     addToken(token);\r\n     return data\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  export const getCurrent = async (token) => {\r\n    \r\n    addToken(token);\r\n\r\n      const {data: result} = await auth.get(\"/current\");\r\n      return result;\r\n  }\r\n\r\n\r\n\r\nconst signup =async(data)=>{\r\n    const {data:result} =await axios.post(\"https://connections-api.herokuapp.com/users/signup/\",data)\r\n    addToken(result.token)\r\n    return result\r\n}\r\n\r\nconst logout =async()=>{\r\n    const {data:result}=await axios.post(\"https://connections-api.herokuapp.com/users/logout/\")\r\n    return result\r\n}\r\n\r\n\r\nconst authApi={\r\n    signup,\r\n    login,\r\n    logout,\r\n    getCurrent\r\n}\r\nexport default authApi"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAGC,MAAMC,QAAQ,GAAGC,KAAK,IAAI;EACvBF,KAAK,CAACG,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8BC,aAA9B,GAA+C,UAASJ,KAAM,EAA9D;AACH,CAFA;;AAGD,MAAMK,IAAI,GAACP,KAAK,CAACQ,MAAN,CAAa;EACpBC,OAAO,EAAC;AADY,CAAb,CAAX;AAIA,OAAO,MAAMC,KAAK,GAAG,MAAOC,QAAP,IAAoB;EACrC,IAAI;IACF,MAAMC,IAAI,GAAGL,IAAI,CAACM,IAAL,CAAW,QAAX,EAAmB;MAACC,KAAK,EAACH,QAAQ,CAACD,KAAhB;MAAsBK,QAAQ,EAACJ,QAAQ,CAACI;IAAxC,CAAnB,CAAb;IACA,MAAMb,KAAK,GAAE,CAAC,MAAMU,IAAP,EAAaA,IAAb,CAAkBV,KAA/B;IACDD,QAAQ,CAACC,KAAD,CAAR;IACA,OAAOU,IAAP;EACA,CALD,CAKE,OAAOI,KAAP,EAAc;IACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ;EACD;AACF,CATI;AAWL,OAAO,MAAMG,UAAU,GAAG,MAAOjB,KAAP,IAAiB;EAEzCD,QAAQ,CAACC,KAAD,CAAR;EAEE,MAAM;IAACU,IAAI,EAAEQ;EAAP,IAAiB,MAAMb,IAAI,CAACc,GAAL,CAAS,UAAT,CAA7B;EACA,OAAOD,MAAP;AACH,CANM;;AAUT,MAAME,MAAM,GAAE,MAAMV,IAAN,IAAa;EACvB,MAAM;IAACA,IAAI,EAACQ;EAAN,IAAe,MAAMpB,KAAK,CAACa,IAAN,CAAW,qDAAX,EAAiED,IAAjE,CAA3B;EACAX,QAAQ,CAACmB,MAAM,CAAClB,KAAR,CAAR;EACA,OAAOkB,MAAP;AACH,CAJD;;AAMA,MAAMG,MAAM,GAAE,YAAS;EACnB,MAAM;IAACX,IAAI,EAACQ;EAAN,IAAc,MAAMpB,KAAK,CAACa,IAAN,CAAW,qDAAX,CAA1B;EACA,OAAOO,MAAP;AACH,CAHD;;AAMA,MAAMI,OAAO,GAAC;EACVF,MADU;EAEVZ,KAFU;EAGVa,MAHU;EAIVJ;AAJU,CAAd;AAMA,eAAeK,OAAf"},"metadata":{},"sourceType":"module"}