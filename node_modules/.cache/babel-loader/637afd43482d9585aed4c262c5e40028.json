{"ast":null,"code":"import axios from \"axios\";\nconst auth = axios.create({\n  baseURL: \"http://podchitat.herokuapp.com/api/user/\"\n});\n\nconst addToken = token => {\n  auth.defaults.headers.common.Authorization = `Bearer ${token}`;\n};\n\nexport const login = async userData => {\n  try {\n    const data = auth.post(`/login`, {\n      email: userData.login,\n      password: userData.password\n    });\n    const token = (await data).data.token;\n    addToken(token);\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const getCurrent = async token => {\n  addToken(token);\n  const {\n    data: result\n  } = await auth.get(\"/current\");\n  return result;\n};\n\nconst logout = async () => {\n  const {\n    data: result\n  } = await auth.get(\"/logout\");\n  console.log(result);\n  return result;\n};\n\nconst signup = async data => {\n  const {\n    data: result\n  } = await auth.post(\"/signup\", data);\n  addToken(result.token);\n  return result;\n};\n\nconst authApi = {\n  signup,\n  login,\n  logout,\n  getCurrent\n};\nexport default authApi;","map":{"version":3,"names":["axios","auth","create","baseURL","addToken","token","defaults","headers","common","Authorization","login","userData","data","post","email","password","error","console","log","getCurrent","result","get","logout","signup","authApi"],"sources":["C:/Users/Gwen/Documents/GitHub/Ejednevnik/diary/src/share/auth.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\n\r\nconst auth=axios.create({\r\n  baseURL:\"http://podchitat.herokuapp.com/api/user/\"\r\n})\r\nconst addToken = token => {\r\n   auth.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n}\r\n\r\nexport const login = async (userData) => {\r\n    try {\r\n      const data = auth.post(`/login`,{email:userData.login,password:userData.password});\r\n      const token= (await data).data.token\r\n     addToken(token);\r\n     return data\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  export const getCurrent = async (token) => {\r\n    addToken(token);\r\n      const {data: result} = await auth.get(\"/current\");\r\n      return result;\r\n  }\r\n  \r\n  const logout =async()=>{\r\n      const {data:result}=await auth.get(\"/logout\")\r\n      console.log(result);\r\n      return result\r\n  }\r\n\r\n\r\n\r\nconst signup =async(data)=>{\r\n    const {data:result} =await auth.post(\"/signup\",data)\r\n    addToken(result.token)\r\n    return result\r\n}\r\n\r\n\r\nconst authApi={\r\n    signup,\r\n    login,\r\n    logout,\r\n    getCurrent\r\n}\r\nexport default authApi"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAGA,MAAMC,IAAI,GAACD,KAAK,CAACE,MAAN,CAAa;EACtBC,OAAO,EAAC;AADc,CAAb,CAAX;;AAGA,MAAMC,QAAQ,GAAGC,KAAK,IAAI;EACvBJ,IAAI,CAACK,QAAL,CAAcC,OAAd,CAAsBC,MAAtB,CAA6BC,aAA7B,GAA8C,UAASJ,KAAM,EAA7D;AACF,CAFD;;AAIA,OAAO,MAAMK,KAAK,GAAG,MAAOC,QAAP,IAAoB;EACrC,IAAI;IACF,MAAMC,IAAI,GAAGX,IAAI,CAACY,IAAL,CAAW,QAAX,EAAmB;MAACC,KAAK,EAACH,QAAQ,CAACD,KAAhB;MAAsBK,QAAQ,EAACJ,QAAQ,CAACI;IAAxC,CAAnB,CAAb;IACA,MAAMV,KAAK,GAAE,CAAC,MAAMO,IAAP,EAAaA,IAAb,CAAkBP,KAA/B;IACDD,QAAQ,CAACC,KAAD,CAAR;IACA,OAAOO,IAAP;EACA,CALD,CAKE,OAAOI,KAAP,EAAc;IACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ;EACD;AACF,CATI;AAWL,OAAO,MAAMG,UAAU,GAAG,MAAOd,KAAP,IAAiB;EACzCD,QAAQ,CAACC,KAAD,CAAR;EACE,MAAM;IAACO,IAAI,EAAEQ;EAAP,IAAiB,MAAMnB,IAAI,CAACoB,GAAL,CAAS,UAAT,CAA7B;EACA,OAAOD,MAAP;AACH,CAJM;;AAMP,MAAME,MAAM,GAAE,YAAS;EACnB,MAAM;IAACV,IAAI,EAACQ;EAAN,IAAc,MAAMnB,IAAI,CAACoB,GAAL,CAAS,SAAT,CAA1B;EACAJ,OAAO,CAACC,GAAR,CAAYE,MAAZ;EACA,OAAOA,MAAP;AACH,CAJD;;AAQF,MAAMG,MAAM,GAAE,MAAMX,IAAN,IAAa;EACvB,MAAM;IAACA,IAAI,EAACQ;EAAN,IAAe,MAAMnB,IAAI,CAACY,IAAL,CAAU,SAAV,EAAoBD,IAApB,CAA3B;EACAR,QAAQ,CAACgB,MAAM,CAACf,KAAR,CAAR;EACA,OAAOe,MAAP;AACH,CAJD;;AAOA,MAAMI,OAAO,GAAC;EACVD,MADU;EAEVb,KAFU;EAGVY,MAHU;EAIVH;AAJU,CAAd;AAMA,eAAeK,OAAf"},"metadata":{},"sourceType":"module"}